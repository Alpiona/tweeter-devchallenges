generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Account {
  id                 Int       @default(autoincrement()) @id
  compoundId         String    @unique @map(name: "compound_id")
  userId             Int       @map(name: "user_id")
  providerType       String    @map(name: "provider_type")
  providerId         String    @map(name: "provider_id")
  providerAccountId  String    @map(name: "provider_account_id")
  refreshToken       String?   @map(name: "refresh_token")
  accessToken        String?   @map(name: "access_token")
  accessTokenExpires DateTime? @map(name: "access_token_expires")
  createdAt          DateTime  @default(now()) @map(name: "created_at")
  updatedAt          DateTime  @default(now()) @map(name: "updated_at")

  @@index([providerAccountId], name: "providerAccountId")
  @@index([providerId], name: "providerId")
  @@index([userId], name: "userId")

  @@map(name: "accounts")
}

model Session {
  id           Int      @default(autoincrement()) @id
  userId       Int      @map(name: "user_id")
  expires      DateTime
  sessionToken String   @unique @map(name: "session_token")
  accessToken  String   @unique @map(name: "access_token")
  createdAt    DateTime @default(now()) @map(name: "created_at")
  updatedAt    DateTime @default(now()) @map(name: "updated_at")

  @@map(name: "sessions")
}

model User {
  id            Int       @default(autoincrement()) @id
  name          String?
  email         String?   @unique
  emailVerified DateTime? @map(name: "email_verified")
  image         String?
  createdAt     DateTime  @default(now()) @map(name: "created_at")
  updatedAt     DateTime  @default(now()) @map(name: "updated_at")

  @@map(name: "users")
}

model VerificationRequest {
  id         Int      @default(autoincrement()) @id
  identifier String
  token      String   @unique
  expires    DateTime
  createdAt  DateTime  @default(now()) @map(name: "created_at")
  updatedAt  DateTime  @default(now()) @map(name: "updated_at")

  @@map(name: "verification_requests")
}

model Profile {
  id                                      Int             @id @default(autoincrement())
  username                                String          @unique
  name                                    String?
  email                                   String          @unique
  description                             String?
  profileImage                           String?          @map(name: "profile_image")
  backgroundImage                        String?         @map(name: "background_image")
  createdAt                              DateTime        @default(now()) @map(name: "created_at")
  updatedAt                              DateTime        @updatedAt @map(name: "updated_at")
  deletedAt                              DateTime?        @map(name: "deleted_at")
  follower                                Follower[]      @relation("follower")
  following                               Follower[]     @relation("following")
  retweet                                 Retweet[]
  tweet                                   Tweet[]
  tweet_comment                           TweetComment[]
  tweet_liked                             TweetLiked[]
  tweet_saved                             TweetSaved[]

  @@map(name: "profile")
}

model Follower {
  followerId                            Int     @map(name: "follower_id")
  followingId                           Int     @map(name: "following_id")
  follower                               Profile   @relation("follower", fields: [followingId], references: [id])
  following                              Profile   @relation("following", fields: [followerId], references: [id])

  @@id([followerId, followingId])
  @@map(name: "follower")
}

model Hashtag {
  id            Int             @id @default(autoincrement())
  content       String
  tweet_hashtag TweetHashtag[]

  @@map(name: "hashtag")
}

model Retweet {
  tweet_id   Int
  profile_id Int
  profile    Profile   @relation(fields: [profile_id], references: [id])
  tweet      Tweet     @relation(fields: [tweet_id], references: [id])

  @@id([tweet_id, profile_id])
  @@map(name: "retweet")
}

model Tweet {
  id            Int             @id @default(autoincrement())
  profileId    Int            @map(name: "profile_id")
  content       String
  createdAt     DateTime        @default(now()) @map(name: "created_at")
  updatedAt     DateTime        @updatedAt @map(name: "updated_at")
  deletedAt     DateTime?        @map(name: "deleted_at")
  profile       Profile         @relation(fields: [profileId], references: [id])
  retweet       Retweet[]
  tweetComment TweetComment[]   @relation("tweetComment")
  tweetHashtag TweetHashtag[]
  tweetImage   TweetImage[]
  tweetLiked   TweetLiked[]
  tweetSaved   TweetSaved[]

  @@map(name: "tweet")
}

model TweetComment {
  id          Int       @id @default(autoincrement())
  tweetId    Int        @map(name: "tweet_id")
  profileId  Int        @map(name: "profile_id")
  content     String
  image       String?
  createdAt   DateTime        @default(now()) @map(name: "created_at")
  updatedAt   DateTime        @updatedAt @map(name: "updated_at")
  deletedAt   DateTime?        @map(name: "deleted_at")
  profile     Profile   @relation(fields: [profileId], references: [id])
  tweet       Tweet     @relation("tweetComment", fields: [tweetId], references: [id])

  @@map(name: "tweet_comment")
}

model TweetHashtag {
  tweetId   Int       @map(name: "tweet_id")
  hashtagId Int       @map(name: "hashtag_id")
  hashtag    Hashtag  @relation(fields: [hashtagId], references: [id])
  tweet      Tweet    @relation(fields: [tweetId], references: [id])

  @@id([tweetId, hashtagId])
  @@map(name: "tweet_hashtag")
}

model TweetImage {
  id         Int       @id @default(autoincrement())
  tweetId   Int       @map(name: "tweet_id")
  content    String
  createdAt  DateTime        @default(now()) @map(name: "created_at")
  updatedAt  DateTime        @updatedAt @map(name: "updated_at")
  deletedAt  DateTime?        @map(name: "deleted_at")
  tweet      Tweet     @relation(fields: [tweetId], references: [id])

  @@map(name: "tweet_image")
}

model TweetLiked {
  tweetId   Int        @map(name: "tweet_id")
  profileId Int        @map(name: "profile_id")
  profile    Profile   @relation(fields: [profileId], references: [id])
  tweet      Tweet     @relation(fields: [tweetId], references: [id])

  @@id([tweetId, profileId])
  @@map(name: "tweet_liked")
}

model TweetSaved {
  tweetId   Int       @map(name: "tweet_id")
  profileId Int       @map(name: "profile_id")
  profile    Profile   @relation(fields: [profileId], references: [id])
  tweet      Tweet     @relation(fields: [tweetId], references: [id])

  @@id([tweetId, profileId])
  @@map(name: "tweet_saved")
}
